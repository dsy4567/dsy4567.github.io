<!DOCTYPE html>
<html lang="zh-CN">
	<head>
		<meta charset="UTF-8" />
		<!-- Copyright (c) 2023 dsy4567, view license at <https://github.com/dsy4567/dsy4567.github.io/blob/main/LICENSE.md> -->
		<meta name="viewport" content="width=device-width, initial-scale=1.0" />
		<meta
			http-equiv="Content-Security-Policy"
			content="
                        upgrade-insecure-requests;
                        script-src 'self' *.googletagmanager.com www.recaptcha.net www.gstatic.cn www.gstatic.com static.cloudflareinsights.com;
                        object-src none
                    "
		/>
		<meta id="主题色" name="theme-color" content="#ddd" />
		<meta id="robots" name="robots" content="all" />
		<meta name="template" content="https://github.com/dsy4567/dsy4567.github.io" />
		<!-- BEGIN META -->
		<meta name="description" content="中考完了之后，闲的没事的我拿 LightHouse 测了一下自己的网站，发现分数有点低。为了拿到四个圆圈圈以满足我的虚荣心，我决定花些力气来优化网站性能。..." />
		<title>如何优化网站加载速度 | 博客 | dsy4567 的小站</title>
		<!-- END META -->
		
		<base target="_self" />
		<link rel="shortcut icon" href="/favicon.ico" type="image/x-icon" />
		<link
			rel="alternate"
			type="application/atom+xml"
			title="博客 | dsy4567 的小站"
			href="https://dsy4567.github.io/rss.xml"
		/>

		<link rel="dns-prefetch" href="https://fonts.googleapis.cn" />
		<link rel="dns-prefetch" href="https://www.googletagmanager.com" />
		<link rel="dns-prefetch" href="https://fonts.gstatic.cn" />

		<link rel="modulepreload" href="/js/analytics.js" crossorigin="use-credentials" />
		<link rel="modulepreload" href="/js/blog.js" crossorigin="use-credentials" />
		<link rel="modulepreload" href="/js/main.js" crossorigin="use-credentials" />
		<link rel="modulepreload" href="/js/marked.min.js" crossorigin="use-credentials" />
		<link rel="modulepreload" href="/js/ncm.js" crossorigin="use-credentials" />
		<link rel="preload" href="/js/highlight.min.js" as="script" crossorigin="use-credentials" />
		<link rel="preload" href="/css/hl.min.css" as="style" crossorigin="use-credentials" />
		<link
			rel="preload"
			href="https://dsy4567.icu/api/hitokoto"
			as="fetch"
			crossorigin="anonymous"
		/>
		<link
			rel="preload"
			href="https://api.github.com/users/dsy4567"
			as="fetch"
			crossorigin="anonymous"
		/>
		<link rel="preload" href="/json/blog.json" as="fetch" crossorigin="anonymous" />
		<link rel="preload" href="/json/icon.json" as="fetch" crossorigin="anonymous" />
		<link rel="preload" href="/json/theme.json" as="fetch" crossorigin="anonymous" />
		<link rel="preload" href="/json/ncm.json" as="fetch" crossorigin="anonymous" />

		<script src="/js/global.js"></script>
		<link rel="stylesheet" href="/css/global.css" />

		<!-- BEGIN OG -->
		<meta property="og:url" content="https://dsy4567.icu/blog/how-to-improve-performance/" />
		<meta property="og:type" content="article" />
		<meta property="og:title" content="如何优化网站加载速度 | 博客 | dsy4567 的小站" />
		<meta property="og:description" content="中考完了之后，闲的没事的我拿 LightHouse 测了一下自己的网站，发现分数有点低。为了拿到四个圆圈圈以满足我的虚荣心，我决定花些力气来优化网站性能。..." />
		<meta property="og:image" content="https://dsy4567.github.io/blog/how-to-improve-performance/img/before.webp" />
		<!-- END OG -->
	</head>
	<body>
		<a href="#main" class="隐藏链接">转到正文</a>

		<nav id="导航栏">
			<div class="左">
				<a class="标题" href="/">dsy4567 的小站</a>
			</div>
			<div class="右">
				<a href="/">
					<svg class="特小尺寸" data-icon="首页"></svg>
					<span>首页</span>
				</a>
				<a href="/blog.html">
					<svg class="特小尺寸" data-icon="博客"></svg>
					<span>博客</span>
				</a>
				<a href="/friends.html">
					<svg class="特小尺寸" data-icon="友情链接"></svg>
					<span>友链</span>
				</a>
			</div>
		</nav>

		<div id="主侧边按钮" class="侧边按钮">
			<button type="button" title="回到顶部" id="回到顶部">
				<svg class="特小尺寸" data-icon="回到顶部"></svg>
			</button>
			<div class="拥有更多选项" type="button" title="网抑云阴乐" id="网抑云阴乐">
				<img class="特小尺寸" id="网抑云阴乐封面" alt="封面" />
				<svg aria-hidden="true" class="特小尺寸" data-icon="网抑云阴乐"></svg>
				<div class="更多选项" id="阴乐控件"></div>
				<div id="歌词"></div>
			</div>
			<div class="拥有更多选项" type="button" title="切换主题" id="切换主题">
				<svg class="特小尺寸" data-icon="切换主题"></svg>
				<div role="radiogroup" class="更多选项" id="所有主题"></div>
			</div>
		</div>

		<div class="进度条外面"><div class="进度条"></div></div>

		<main>
			<div class="左">
				<section id="我">
					<img
						aria-label="自画像"
						class="头像 大尺寸"
						src="/img/avatar.jpg"
						alt="自画像"
						title="头像"
					/>
					<h2>dsy4567</h2>
					<span id="关注被关注码龄"> 关注: 加载中 | 被关注: 加载中 | 码龄: 加载中 </span>
					<br />
					<span id="联系方式">
						<a
							href="https://qwq.dsy4567.icu/api/getemail"
							title="电子邮箱"
							id="电子邮箱"
						>
							<svg class="小尺寸" data-icon="电子邮箱"></svg>
						</a>
						<a href="https://qwq.dsy4567.icu/api/getemail" title="Telegram" id="tg">
							<svg class="小尺寸" data-icon="Telegram"></svg>
						</a>
						<a href="https://github.com/dsy4567" title="GitHub">
							<svg class="小尺寸" data-icon="GitHub"></svg>
						</a>
						<a href="https://x.com/dsy4567" title="X">
							<svg class="小尺寸" data-icon="X"></svg>
						</a>
						<a href="https://weibo.com/dsy4567" title="微博">
							<svg class="小尺寸" data-icon="微博"></svg>
						</a>
						<a href="https://www.luogu.com.cn/user/776713" title="洛谷">
							<svg class="小尺寸" data-icon="洛谷"></svg>
						</a>
						<a href="/rss.xml" title="RSS" id="rss">
							<svg class="小尺寸" data-icon="RSS"></svg>
						</a>
					</span>
				</section>
				<section class="一言">
					<h2>
						<svg class="小尺寸" data-icon="一言"></svg>
						<span>一言</span>
					</h2>
					<p id="一言">加载中</p>
					<a href="#">查看详细信息</a>
				</section>
			</div>
			<div aria-hidden="true" id="分界线">
				<svg class="特小尺寸" data-icon="隐藏显示"></svg>
			</div>
			<article class="右" id="main">
				<!-- BEGIN MAIN -->
				<section><h1 id="如何优化网站加载速度">如何优化网站加载速度</h1>
<p>中考完了之后，闲的没事的我拿 LightHouse 测了一下自己的网站，发现分数有点低。为了拿到四个圆圈圈<del>以满足我的虚荣心</del>，我决定花些力气来优化网站性能。</p>
<!-- more -->

<p>废话不多说，先把图放上来。</p>
<p>优化前：</p>
<p><a href="https://pagespeed.web.dev/analysis/https-dsy4567-cf/gf94qbiu4z"><img src="/blog/how-to-improve-performance/img/before.webp" alt="优化前" width="969" height="835" loading="lazy"></a></p>
<p>优化后：</p>
<p><a href="https://pagespeed.web.dev/analysis/https-dsy4567-cf/jyhkiaf907"><img src="/blog/how-to-improve-performance/img/after.webp" alt="优化后" width="964" height="831" loading="lazy"></a></p>
<h2 id="为什么优化网站加载速度很重要">为什么优化网站加载速度很重要</h2>
<p>像我这种有点耐心<spoiler>（还不是被某堵墙和我这老爷机逼的）</spoiler>的人，逛加载速度慢网站通常会一边忍着一边想带妈的词语。而一些没耐心的人进了这种网站，肯定会想<code>这™什么破网站</code>，然后立马点叉。对于用户很多的电商平台来说，网站加载时间每多 100ms，用户越没有耐心看下去，然后电商平台就要少赚好几沓钞票。</p>
<h2 id="少说废话，进入正题">少说废话，进入正题</h2>
<h3 id="多用-getelementsbyxxx，少用-queryselectorall">多用 <code>getElement(s)ByXxx</code>，少用 <code>querySelector(All)</code></h3>
<p><img src="/blog/how-to-improve-performance/img/compare-gebxxx-qs.webp" alt="用一段代码比较 getElement(s)ByXxx 和 querySelector(All) 的性能" width="428" height="362" loading="lazy"></p>
<p>由图可知，二者的速度差距挺大的。虽然 <code>querySelector(All)</code> 用起来又舒服又方便，但它是真的慢。平时写代码的时候，我们应该权衡方便和性能，最好只在 <code>getElement(s)ByXxx</code> 满足不了要求时才用 <code>querySelector(All)</code>。</p>
<h3 id="善用预加载">善用预加载</h3>
<p>如果你的网页有可能会晚些加载的资源（比如动态加载脚本、CSS 里的背景图片），可以在<code>&lt;head&gt;</code> 里添加 <code>&lt;link rel="preload"/&gt;</code> 或 <code>&lt;link rel="dns-prefetch"&gt;</code>，声明稍后可能会加载的资源，举个栗子：</p>
<pre><code class="language-html">&lt;!DOCTYPE html&gt;
&lt;html lang="zh-CN"&gt;
    &lt;head&gt;
        &lt;!-- ... --&gt;

        &lt;link rel="dns-prefetch" href="https://api.github.com" /&gt;
        &lt;link rel="dns-prefetch" href="https://www.googletagmanager.com" /&gt;

        &lt;link rel="preload" href="/js/ncm.js" as="script" crossorigin="anonymous" /&gt;
        &lt;link rel="preload" href="/json/icon.json" as="fetch" crossorigin="anonymous" /&gt;
        &lt;link rel="preload" href="/json/theme.json" as="fetch" crossorigin="anonymous" /&gt;
    &lt;/head&gt;
    &lt;!-- ... --&gt;
&lt;/html&gt;
</code></pre>
<p>具体用法可以看看<a href="https://developer.mozilla.org/en-US/docs/Web/HTML/Attributes/rel/preload">这篇 MDN 文档（英语）</a>。</p>
<h3 id="为-script-标签添加-async-或-defer-属性">为 <code>&lt;script&gt;</code> 标签添加 <code>async</code> 或 <code>defer</code> 属性</h3>
<p>如果脚本不需要尽快执行，添加这两个属性可以让浏览器尽快渲染网页，而不必等待脚本执行完毕。</p>
<p>需要注意的是，添加 <code>async</code> 属性后，<code>DOMContentLoaded</code> 事件可能无法触发。</p>
<h3 id="更多做法">更多做法</h3>
<p>这些做法我就不细说了</p>
<ul>
<li>推迟加载不太重要的资源</li>
<li>压缩资源（这个我不想搞）</li>
<li>少用小站长提供的接口，说不定哪一天就变慢或者崩掉了，建议自行搭建</li>
<li>少用费资源的 CSS 方法（比如 <code>blur()</code>）</li>
</ul>
<hr /><a rel="license" href="https://www.creativecommons.org/licenses/by-sa/4.0/"><img width="88" height="31" alt="知识共享许可协议" style="border-width:0;width:inherit;height:inherit;border-radius:unset;" src="/img/cc-by-sa-4.0.png" /></a><br />如无特别说明，本作品采用<a rel="license" href="https://www.creativecommons.org/licenses/by-sa/4.0/">知识共享署名-相同方式共享 4.0 国际许可协议</a>进行许可。<br /><span class="淡化">发表于: 2023/6/24 15:38:27, 更新于: 2023/6/24 15:38:27</br>标签: <a href="/blog.html?tag=技术">技术</a> </span>
				</section>
				<script id="当前文章信息" type="application/json">{"updated":"2023-06-24T07:38:27.834Z","date":"2023-06-24T07:38:27.834Z","issue":22,"tags":["技术"],"id":"how-to-improve-performance","title":"如何优化网站加载速度","desc":"# 如何优化网站加载速度\n\n中考完了之后，闲的没事的我拿 LightHouse 测了一下自己的网站，发现分数有点低。为了拿到四个圆圈圈~~以满足我的虚荣心~~，我决定花些力气来优化网站性能。\n\n","desc_text":"中考完了之后，闲的没事的我拿 LightHouse 测了一下自己的网站，发现分数有点低。为了拿到四个圆圈圈以满足我的虚荣心，我决定花些力气来优化网站性能。...","cover":"https://dsy4567.github.io/blog/how-to-improve-performance/img/before.webp"}</script>
				<!-- END MAIN -->
			</article>
		</main>

		<footer id="copyright">
			© 2022-2025
			<a href="https://github.com/dsy4567">dsy4567</a><br />
			<a href="https://icp.gov.moe/?keyword=20230212" target="_blank">萌ICP备20230212号</a>
			|
			<a href="https://beian.miit.gov.cn/" target="_blank"
				>陕ICP备 备<span id="fuck">&#20320;&#22920;</span>的案</a
			><br />
			<!-- 修改代码时必须保留此链接和原作者信息, 可以添加修改后源代码的链接及作者信息 -->
			Powered by
			<a href="https://github.com/dsy4567/dsy4567.github.io">dsy4567/dsy4567.github.io</a>
		</footer>
		<noscript>
			<div>请启用 JavaScript 以获得更好的浏览体验</div>
		</noscript>
		<link disabled rel="stylesheet" href="/css/font.css" />
		<script src="/js/main.js" type="module" async></script>
	</body>
</html>
